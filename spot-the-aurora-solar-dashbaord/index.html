<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Cache-Control Headers to prevent browser caching -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#171717">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="shortcut icon" href="/favicon.ico">

    <title>TNR Protography CME Modeler</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <!-- Non-Leaflet CDN scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>

    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #171717; color: #d4d4d4; overflow: hidden; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #262626; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #525252; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #737373; }
        
        /* --- Leaflet Dark Theme & Icon Fixes --- */
        .leaflet-container { background-color: #1a1a1a !important; }
        .leaflet-popup-content-wrapper, .leaflet-popup-tip {
            background: #262626;
            color: #d4d4d4;
            box-shadow: 0 3px 14px rgba(0,0,0,0.4);
        }
        .emoji-marker {
            background-color: transparent !important;
            border: none !important;
        }
        .emoji-marker div {
             width: 32px;
             height: 32px;
             line-height: 32px;
             text-align: center;
             font-size: 28px;
             text-shadow: 0 0 5px black;
        }
        /* Solar Flare Colors (already present, ensuring consistency) */
        :root { 
            --solar-flare-ab-rgb: 34, 197, 94; /* Green */
            --solar-flare-c-rgb: 245, 158, 11; /* Yellow */
            --solar-flare-m-rgb: 255, 69, 0; /* OrangeRed */
            --solar-flare-x-rgb: 147, 112, 219; /* Purple */
            --solar-flare-x5plus-rgb: 255, 105, 180; /* Hot Pink */
            
            /* NEW: Proton Flux S-Scale Colors */
            --proton-s0-rgb: 34, 197, 94; /* Green */
            --proton-s1-rgb: 255, 215, 0; /* Yellow */
            --proton-s2-rgb: 255, 165, 0; /* Orange */
            --proton-s3-rgb: 255, 69, 0; /* Red */
            --proton-s4-rgb: 128, 0, 128; /* Purple */
            --proton-s5-rgb: 255, 20, 147; /* Pink */
        } 
        /* Ensure scrollbar styles are applied */
        .styled-scrollbar::-webkit-scrollbar { width: 8px; }
        .styled-scrollbar::-webkit-scrollbar-track { background: #262626; border-radius: 10px; }
        .styled-scrollbar::-webkit-scrollbar-thumb { background: #525252; border-radius: 10px; }
    </style>
<script type="importmap">
{
  "imports": {
    "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
    "react": "https://esm.sh/react@^19.1.0",
    "react/": "https://esm.sh/react@^19.1.0/"
  }
}
</script>
</head>
<body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
</body>
</html>